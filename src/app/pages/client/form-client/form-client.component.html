<div class="content">
  <form class="client-form" [formGroup]="formClient" nz-form>
    <div class="row">
      <div class="form-title">
        <h2>{{ titleForm }}</h2>
      </div>
    </div>
    <div class="row">
      <div class="col-3">
        <nz-form-item>
        <nz-form-label nzFor="clientType">Tipo de Cliente</nz-form-label>
        <nz-form-control nzCompact>
          <nz-select
            formControlName="type"
            id="clientType"
            nzPlaceHolder="Selecione"
            nzSize="large"
            (ngModelChange)="onChangeTypeClient()"
          >
            <nz-option [nzValue]="1" nzLabel="Pessoa Física"></nz-option>
            <nz-option [nzValue]="2" nzLabel="Pessoa Juridica"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
      </div>
      <div class="col-3">
        <nz-form-item>
          <nz-form-label nzFor="document">{{ labelDoc }}*</nz-form-label>
          <nz-form-control nzCompact [nzErrorTip]="docValidation">
            <nz-input-group nzSearch [nzAddOnAfter]="suffixIconButton" nzSize="large">
              <input
              type="text"
              formControlName="document"
              nz-input
              id="document"
              placeholder="Digite o {{ labelDoc }}"
              minlength="11"
              maxlength="18"
              required
              mask="000.000.000-00||00.000.000/0000-00"
            />
            </nz-input-group>
          </nz-form-control>
          <ng-template #suffixIconButton>
            <button nz-button nzType="primary" nzSearch (click)="onSearchCnpj()" [disabled]="formClient.get('type').value == 1 || formClient.get('type').value == null"><i nz-icon nzType="search"></i></button>
          </ng-template>
        </nz-form-item>
      </div>
      <div class="col-3" *ngIf="formClient.get('type').value == 2">
        <nz-form-item>
          <nz-form-label nzFor="stateRegistration">Inscrição Estadual</nz-form-label>
          <nz-form-control nzCompact>
            <input
              type="text"
              formControlName="stateRegistration"
              nz-input
              id="stateRegistration"
              placeholder="Digite a inscrição estadual"
              maxlength="11"
              nzSize="large"
              (keyup)="onRemoveEspecialCharacters()"
            />
          </nz-form-control>
        </nz-form-item>
      </div>
      <div class="col-3">
        <nz-form-item>
        <nz-form-label nzFor="contract">Contrato</nz-form-label>
        <nz-form-control nzCompact>
          <nz-select
            formControlName="contract"
            id="contract"
            nzPlaceHolder="Selecione"
            nzSize="large"
          >
            <nz-option [nzValue]="option" nzLabel="{{option.description}}" *ngFor="let option of contracts"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
      </div>
    </div>
    <div class="row">
      <div class="col-6">
        <nz-form-item>
          <nz-form-label nzFor="fullname">{{ labelFullname }}*</nz-form-label>
          <nz-form-control nzHasFeedback [nzErrorTip]="fullnameValidation">
            <input
              type="text"
              nz-input
              formControlName="fullname"
              id="fullname"
              placeholder="Digite o {{ labelFullname }}"
              minlength="5"
              maxlength="255"
              required
              nzSize="large"
            />
          </nz-form-control>
        </nz-form-item>
      </div>
      <div class="col-6">
        <nz-form-item>
          <nz-form-label nzFor="nickname">{{ labelNickname }}</nz-form-label>
          <nz-form-control nzCompact>
            <input
              type="text"
              formControlName="nickname"
              nz-input
              id="nickname"
              placeholder="Digite o {{ labelNickname }}"
              nzSize="large"
            />
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
    <div class="row">
      <div class="col-2">
        <nz-form-item>
          <nz-form-label nzFor="zipcode">CEP</nz-form-label>
          <nz-form-control nzSearch>
            <input
              type="text"
              formControlName="zipcode"
              id="zipcode"
              nz-input
              placeholder="Ex: 00000-000"
              nzSize="large"
              mask="00000-000"
            />
          </nz-form-control>
        </nz-form-item>
      </div>
      <div class="col-4">
        <nz-form-item>
          <nz-form-label nzFor="address">Endereço</nz-form-label>
          <nz-form-control nzCompact>
            <input
              type="text"
              formControlName="address"
              nz-input
              id="address"
              placeholder="Digite o nome da rua"
              nzSize="large"
            />
          </nz-form-control>
        </nz-form-item>
      </div>
      <div class="col-2">
        <nz-form-item>
          <nz-form-label nzFor="homeNumber">Nº</nz-form-label>
          <nz-form-control nzCompact>
            <input
              type="text"
              formControlName="homeNumber"
              nz-input
              id="homeNumber"
              placeholder="Ex: 123"
              nzSize="large"
            />
          </nz-form-control>
        </nz-form-item>
      </div>
      <div class="col-4">
        <nz-form-item>
          <nz-form-label nzFor="complement">Complemento</nz-form-label>
          <nz-form-control nzCompact>
            <input
              type="text"
              formControlName="complement"
              nz-input
              id="complement"
              placeholder="Ex: Apartamento"
              nzSize="large"
            />
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
    <div class="row">
      <div class="col-6">
        <nz-form-item>
          <nz-form-label nzFor="neighborhood">Bairro</nz-form-label>
          <nz-form-control nzCompact>
            <input
              type="text"
              formControlName="neighborhood"
              nz-input
              id="neighborhood"
              placeholder="Ex: Centro"
              nzSize="large"
            />
          </nz-form-control>
        </nz-form-item>
      </div>
      <div class="col-3">
        <nz-form-item>
          <nz-form-label nzFor="state">Estado*</nz-form-label>
          <nz-form-control nzHasFeedback [nzErrorTip]="'Estado é obrigatório'">
            <nz-select
              nzShowSearch
              nzAllowClear
              nzPlaceHolder="Selecione"
              formControlName="state"
              id="state"
              required
              nzSize="large"
            >
              <nz-option nzLabel="Ceará" nzValue="CE"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </div>
      <div class="col-3">
        <nz-form-item>
          <nz-form-label nzFor="state">Cidade*</nz-form-label>
          <nz-form-control nzHasFeedback [nzErrorTip]="'Cidade é obrigatória'">
            <input
            type="text"
            formControlName="city"
            nz-input
            id="city"
            placeholder="Ex: Crateús"
            nzSize="large"
          />
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
    <div class="row">
      <div class="col-3">
        <nz-form-item>
          <nz-form-label nzFor="phoneNumberOne">Contato*</nz-form-label>
          <nz-form-control nzHasFeedback [nzErrorTip]="'Contato é obrigatório'">
            <input
              type="text"
              formControlName="phoneNumberOne"
              nz-input
              id="phoneNumberOne"
              placeholder="Ex.: Telefone ou Celular"
              required
              nzSize="large"
              mask="(00) 0 0000-0000||(00) 0000-0000"
            />
          </nz-form-control>
        </nz-form-item>
      </div>
      <div class="col-3">
        <nz-form-item>
          <nz-form-label nzFor="phoneNumberTwo">Contato</nz-form-label>
          <nz-form-control>
            <input
              type="text"
              formControlName="phoneNumberTwo"
              nz-input
              id="phoneNumberTwo"
              placeholder="Ex.: Telefone ou Celular"
              nzSize="large"
              mask="(00) 0 0000-0000||(00) 0000-0000"
            />
          </nz-form-control>
        </nz-form-item>
      </div>
      <div class="col-6">
        <nz-form-item>
          <nz-form-label nzFor="email">Email</nz-form-label>
          <nz-form-control nzHasFeedback [nzErrorTip]="'Email incorreto'">
            <input
              type="email"
              formControlName="email"
              nz-input
              id="email"
              placeholder="Digite o email"
              nzSize="large"
            />
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
    <div class="action-form">
      <button nz-button nzType="default" nzSize="large" (click)="onBackToLocation()">
        Voltar
      </button>
      <button
        nz-button
        nzType="primary"
        nzSize="large"
        (click)="onSubmit()"
        [disabled]="!formClient.valid"
      >
        Salvar
      </button>
    </div>
  </form>
</div>

<ng-template #fullnameValidation let-control>
  <ng-container *ngIf="formClient.get('fullname').hasError('maxlength')"
    ><span class="valid-text"
      >Tamanho máximo de 255 caracteres</span
    ></ng-container
  >
  <ng-container *ngIf="formClient.get('fullname').hasError('minlength')"
    ><span class="valid-text"
      >Tamanho minimo de 5 caracteres</span
    ></ng-container
  >
  <ng-container *ngIf="formClient.get('fullname').hasError('required')"
    ><span class="valid-text"
      >{{ labelFullname }} obrigatório</span
    ></ng-container
  >
</ng-template>

<ng-template #docValidation let-control>
  <ng-container *ngIf="formClient.get('document').hasError('maxlength')"
    ><span class="valid-text">Máximo de 18 caracteres</span></ng-container
  >
  <ng-container *ngIf="formClient.get('document').hasError('minlength')"
    ><span class="valid-text">Minimo de 13 caracteres</span></ng-container
  >
  <ng-container *ngIf="formClient.get('document').hasError('required')"
    ><span class="valid-text">{{ labelDoc }} obrigatório</span></ng-container
  >
</ng-template>
